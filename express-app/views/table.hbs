<table class="table">
  <thead>
    <tr>
      <th scope="col">First Name</th>
      <th scope="col">Last Name</th>
      <th scope="col">Gender</th>
      {{#if admin}}
        <th scope="col">Email</th>
      {{/if}}
    </tr>
  </thead>
  <tbody>

    {{!--
      In theory this should be faster as we check
      whether the user is admin only once here
      (while have more lines)
    --}}

    {{#*inline "tableRow"}}
      <td>{{row.first_name}}</td>
      <td>{{row.last_name}}</td>
      <td>{{row.gender}}</td>
    {{/inline}}

    {{#if admin}}
      {{#each data}}
      <tr>
        {{>tableRow row=this}}
        <td>{{this.email}}</td>
      </tr>
      {{/each}}
    {{else}}
      {{#each data}}
      <tr>
        {{>tableRow row=this}}
      </tr>
      {{/each}}
    {{/if}}

  </tbody>
</table>
